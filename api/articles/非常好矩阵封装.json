{"title":"非常好矩阵封装","uid":"9c99dc11ee58b9118dc125cce366c4cd","slug":"非常好矩阵封装","date":"2023-09-29T20:13:34.000Z","updated":"2023-11-15T15:41:08.117Z","comments":true,"path":"api/articles/非常好矩阵封装.json","keywords":null,"cover":null,"content":"<h2 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h2><ol>\n<li>支持直接 cin, cout</li>\n</ol>\n<h2 id=\"Code\"><a href=\"#Code\" class=\"headerlink\" title=\"Code\"></a>Code</h2><div class=\"language-cpp\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">cpp</span><pre class=\"shiki github-dark\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F97583\">namespace</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">Badnuker</span><span style=\"color: #E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">    </span><span style=\"color: #F97583\">const</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> mod </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #F97583\">e</span><span style=\"color: #79B8FF\">9</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">+</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">7</span><span style=\"color: #E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">    </span><span style=\"color: #F97583\">class</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">        </span><span style=\"color: #F97583\">public:</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> row, col;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> a[</span><span style=\"color: #79B8FF\">105</span><span style=\"color: #E1E4E8\">][</span><span style=\"color: #79B8FF\">105</span><span style=\"color: #E1E4E8\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #B392F0\">memset</span><span style=\"color: #E1E4E8\">(a, </span><span style=\"color: #79B8FF\">0</span><span style=\"color: #E1E4E8\">, </span><span style=\"color: #F97583\">sizeof</span><span style=\"color: #E1E4E8\">(a));</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #FFAB70\">x</span><span style=\"color: #E1E4E8\">, </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #FFAB70\">y</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                row </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> x;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                col </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> y;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #B392F0\">memset</span><span style=\"color: #E1E4E8\">(a, </span><span style=\"color: #79B8FF\">0</span><span style=\"color: #E1E4E8\">, </span><span style=\"color: #F97583\">sizeof</span><span style=\"color: #E1E4E8\">(a));</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">friend</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">istream</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">operator</span><span style=\"color: #B392F0\">&gt;&gt;</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #B392F0\">istream</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #FFAB70\">is</span><span style=\"color: #E1E4E8\">, </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #FFAB70\">x</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> i </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; i </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> x.row; i</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> j </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; j </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> x.col; j</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                        is </span><span style=\"color: #F97583\">&gt;&gt;</span><span style=\"color: #E1E4E8\"> x.a[i][j];</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #F97583\">return</span><span style=\"color: #E1E4E8\"> is;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">friend</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">ostream</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">operator</span><span style=\"color: #B392F0\">&lt;&lt;</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #B392F0\">ostream</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #FFAB70\">os</span><span style=\"color: #E1E4E8\">, </span><span style=\"color: #F97583\">const</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #FFAB70\">x</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> i </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; i </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> x.row; i</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> j </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; j </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> x.col; j</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                        os </span><span style=\"color: #F97583\">&lt;&lt;</span><span style=\"color: #E1E4E8\"> x.a[i][j] </span><span style=\"color: #F97583\">&lt;&lt;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #9ECBFF\">&#39; &#39;</span><span style=\"color: #E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    </span><span style=\"color: #F97583\">if</span><span style=\"color: #E1E4E8\"> (i </span><span style=\"color: #F97583\">!=</span><span style=\"color: #E1E4E8\"> x.row) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                        os </span><span style=\"color: #F97583\">&lt;&lt;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #9ECBFF\">&#39;</span><span style=\"color: #79B8FF\">\\n</span><span style=\"color: #9ECBFF\">&#39;</span><span style=\"color: #E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #F97583\">return</span><span style=\"color: #E1E4E8\"> os;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">operator</span><span style=\"color: #B392F0\">*</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #F97583\">const</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #FFAB70\">x</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                Matrix </span><span style=\"color: #B392F0\">res</span><span style=\"color: #E1E4E8\">(row, x.col);</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> i </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; i </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> row; i</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> k </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; k </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> col; k</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                        </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> tmp </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> a[i][k];</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                        </span><span style=\"color: #F97583\">for</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> j </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">; j </span><span style=\"color: #F97583\">&lt;=</span><span style=\"color: #E1E4E8\"> x.col; j</span><span style=\"color: #F97583\">++</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                            (res.a[i][j] </span><span style=\"color: #F97583\">+=</span><span style=\"color: #E1E4E8\"> tmp </span><span style=\"color: #F97583\">*</span><span style=\"color: #E1E4E8\"> x.a[k][j]) </span><span style=\"color: #F97583\">%=</span><span style=\"color: #E1E4E8\"> mod;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                </span><span style=\"color: #F97583\">return</span><span style=\"color: #E1E4E8\"> res;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">void</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">operator</span><span style=\"color: #B392F0\">*=</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #F97583\">const</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">Matrix</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #FFAB70\">x</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                (</span><span style=\"color: #F97583\">*</span><span style=\"color: #79B8FF\">this</span><span style=\"color: #E1E4E8\">) </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> (</span><span style=\"color: #F97583\">*</span><span style=\"color: #79B8FF\">this</span><span style=\"color: #E1E4E8\">) </span><span style=\"color: #F97583\">*</span><span style=\"color: #E1E4E8\"> x;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">void</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">operator</span><span style=\"color: #B392F0\">%=</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #F97583\">const</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #B392F0\">x</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">__attribute__((</span><span style=\"color: #B392F0\">unused</span><span style=\"color: #79B8FF\">))</span><span style=\"color: #E1E4E8\">) &#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">    &#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">    </span><span style=\"color: #F97583\">template</span><span style=\"color: #E1E4E8\">&lt;</span><span style=\"color: #F97583\">typename</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">T</span><span style=\"color: #E1E4E8\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">    </span><span style=\"color: #B392F0\">T</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #B392F0\">ksm</span><span style=\"color: #E1E4E8\">(</span><span style=\"color: #B392F0\">T</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #FFAB70\">x</span><span style=\"color: #E1E4E8\">, </span><span style=\"color: #F97583\">int</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #FFAB70\">y</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">        T res </span><span style=\"color: #F97583\">=</span><span style=\"color: #E1E4E8\"> x;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">        y</span><span style=\"color: #F97583\">--</span><span style=\"color: #E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">        </span><span style=\"color: #F97583\">while</span><span style=\"color: #E1E4E8\"> (y) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            </span><span style=\"color: #F97583\">if</span><span style=\"color: #E1E4E8\"> (y </span><span style=\"color: #F97583\">&amp;</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">                res </span><span style=\"color: #F97583\">*=</span><span style=\"color: #E1E4E8\"> x;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            x </span><span style=\"color: #F97583\">*=</span><span style=\"color: #E1E4E8\"> x;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">            y </span><span style=\"color: #F97583\">&gt;&gt;=</span><span style=\"color: #E1E4E8\"> </span><span style=\"color: #79B8FF\">1</span><span style=\"color: #E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">        </span><span style=\"color: #F97583\">return</span><span style=\"color: #E1E4E8\"> res;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E1E4E8\">&#125;</span></span></code></pre></div>","text":"Tips 支持直接 cin, cout Codecppnamespace Badnuker &#123; const int mod = 1e9 + 7; cl...","permalink":"/post/非常好矩阵封装","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"模板","slug":"模板","count":1,"path":"api/tags/模板.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Tips\"><span class=\"toc-text\">Tips</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Code\"><span class=\"toc-text\">Code</span></a></li></ol>","author":{"name":"Badnuker","slug":"blog-author","avatar":"https://cdn.luogu.com.cn/upload/usericon/799947.png","link":"/","description":"关注 Badnuker 谢谢喵~","socials":{"github":"https://github.com/Badnuker","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"《大卫 · 科波菲尔》读后感","uid":"e4178026914c4458eb527c4a1d58a3e9","slug":"大卫科波菲尔读后感","date":"2023-10-06T23:34:58.000Z","updated":"2023-11-15T15:41:08.117Z","comments":true,"path":"api/articles/大卫科波菲尔读后感.json","keywords":null,"cover":null,"text":"在高二学年的 9 月份，我读完了《大卫 · 科波菲尔》。这本书由查尔斯·狄更斯创作，是他 “心中最宠爱的孩子”。在这部带有自传性质的小说里，狄更斯藉大卫自身的历...","permalink":"/post/大卫科波菲尔读后感","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"读后感","slug":"读后感","count":1,"path":"api/tags/读后感.json"}],"author":{"name":"Badnuker","slug":"blog-author","avatar":"https://cdn.luogu.com.cn/upload/usericon/799947.png","link":"/","description":"关注 Badnuker 谢谢喵~","socials":{"github":"https://github.com/Badnuker","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{}}