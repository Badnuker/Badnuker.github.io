{"title":"非常好矩阵封装","uid":"9c99dc11ee58b9118dc125cce366c4cd","slug":"非常好矩阵封装","date":"2023-09-29T20:13:34.000Z","updated":"2023-09-29T12:20:19.763Z","comments":true,"path":"api/articles/非常好矩阵封装.json","keywords":null,"cover":null,"content":"<h2 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h2><ol>\n<li>支持直接 cin, cout</li>\n</ol>\n<h2 id=\"Code\"><a href=\"#Code\" class=\"headerlink\" title=\"Code\"></a>Code</h2><div class=\"language-cpp\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">cpp</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #569CD6\">namespace</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">Badnuker</span><span style=\"color: #D4D4D4\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #569CD6\">const</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> mod = </span><span style=\"color: #B5CEA8\">1e9</span><span style=\"color: #D4D4D4\"> + </span><span style=\"color: #B5CEA8\">7</span><span style=\"color: #D4D4D4\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #569CD6\">class</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">Matrix</span><span style=\"color: #D4D4D4\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #569CD6\">public:</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> row, col;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">a</span><span style=\"color: #D4D4D4\">[</span><span style=\"color: #B5CEA8\">105</span><span style=\"color: #D4D4D4\">][</span><span style=\"color: #B5CEA8\">105</span><span style=\"color: #D4D4D4\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #DCDCAA\">Matrix</span><span style=\"color: #D4D4D4\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #DCDCAA\">memset</span><span style=\"color: #D4D4D4\">(a, </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #D4D4D4\">, </span><span style=\"color: #569CD6\">sizeof</span><span style=\"color: #D4D4D4\">(a));</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #DCDCAA\">Matrix</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">, </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">y</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                row = x;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                col = y;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #DCDCAA\">memset</span><span style=\"color: #D4D4D4\">(a, </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #D4D4D4\">, </span><span style=\"color: #569CD6\">sizeof</span><span style=\"color: #D4D4D4\">(a));</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #569CD6\">friend</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">istream</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #C586C0\">operator&gt;&gt;</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #4EC9B0\">istream</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #9CDCFE\">is</span><span style=\"color: #D4D4D4\">, </span><span style=\"color: #4EC9B0\">Matrix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> i = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; i &lt;= </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">row</span><span style=\"color: #D4D4D4\">; i++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> j = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; j &lt;= </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">col</span><span style=\"color: #D4D4D4\">; j++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                        is &gt;&gt; </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">a</span><span style=\"color: #D4D4D4\">[i][j];</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #C586C0\">return</span><span style=\"color: #D4D4D4\"> is;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #569CD6\">friend</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">ostream</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #C586C0\">operator&lt;&lt;</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #4EC9B0\">ostream</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #9CDCFE\">os</span><span style=\"color: #D4D4D4\">, </span><span style=\"color: #569CD6\">const</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">Matrix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> i = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; i &lt;= </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">row</span><span style=\"color: #D4D4D4\">; i++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> j = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; j &lt;= </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">col</span><span style=\"color: #D4D4D4\">; j++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                        os &lt;&lt; </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">a</span><span style=\"color: #D4D4D4\">[i][j] &lt;&lt; </span><span style=\"color: #CE9178\">&#39; &#39;</span><span style=\"color: #D4D4D4\">;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    </span><span style=\"color: #C586C0\">if</span><span style=\"color: #D4D4D4\"> (i != </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">row</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                        os &lt;&lt; </span><span style=\"color: #CE9178\">&#39;</span><span style=\"color: #D7BA7D\">\\n</span><span style=\"color: #CE9178\">&#39;</span><span style=\"color: #D4D4D4\">;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #C586C0\">return</span><span style=\"color: #D4D4D4\"> os;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #4EC9B0\">Matrix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #C586C0\">operator*</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #569CD6\">const</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">Matrix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                Matrix </span><span style=\"color: #DCDCAA\">res</span><span style=\"color: #D4D4D4\">(row, </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">col</span><span style=\"color: #D4D4D4\">);</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> i = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; i &lt;= row; i++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> k = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; k &lt;= col; k++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                        </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> tmp = </span><span style=\"color: #9CDCFE\">a</span><span style=\"color: #D4D4D4\">[i][k];</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                        </span><span style=\"color: #C586C0\">for</span><span style=\"color: #D4D4D4\"> (</span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> j = </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">; j &lt;= </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">col</span><span style=\"color: #D4D4D4\">; j++) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                            (</span><span style=\"color: #9CDCFE\">res</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">a</span><span style=\"color: #D4D4D4\">[i][j] += tmp * </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #9CDCFE\">a</span><span style=\"color: #D4D4D4\">[k][j]) %= mod;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                </span><span style=\"color: #C586C0\">return</span><span style=\"color: #D4D4D4\"> res;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #569CD6\">void</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #C586C0\">operator*=</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #569CD6\">const</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">Matrix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                (*</span><span style=\"color: #569CD6\">this</span><span style=\"color: #D4D4D4\">) = (*</span><span style=\"color: #569CD6\">this</span><span style=\"color: #D4D4D4\">) * x;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #569CD6\">void</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #C586C0\">operator%=</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #569CD6\">const</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">&amp;</span><span style=\"color: #4EC9B0\">x</span><span style=\"color: #D4D4D4\"> __attribute__((</span><span style=\"color: #4EC9B0\">unused</span><span style=\"color: #D4D4D4\">))) &#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    &#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #569CD6\">template</span><span style=\"color: #D4D4D4\">&lt;</span><span style=\"color: #569CD6\">typename</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #4EC9B0\">T</span><span style=\"color: #D4D4D4\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #4EC9B0\">T</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #DCDCAA\">ksm</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #4EC9B0\">T</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">x</span><span style=\"color: #D4D4D4\">, </span><span style=\"color: #569CD6\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #9CDCFE\">y</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        T res = x;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        y--;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #C586C0\">while</span><span style=\"color: #D4D4D4\"> (y) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            </span><span style=\"color: #C586C0\">if</span><span style=\"color: #D4D4D4\"> (y &amp; </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">                res *= x;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            x *= x;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">            y &gt;&gt;= </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #D4D4D4\">;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #C586C0\">return</span><span style=\"color: #D4D4D4\"> res;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">&#125;</span></span></code></pre></div>","text":"Tips 支持直接 cin, cout Codecppnamespace Badnuker &#123; const int mod = 1e9 + 7; cl...","permalink":"/post/非常好矩阵封装","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"模板","slug":"模板","count":1,"path":"api/tags/模板.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Tips\"><span class=\"toc-text\">Tips</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Code\"><span class=\"toc-text\">Code</span></a></li></ol>","author":{"name":"Badnuker","slug":"blog-author","avatar":"https://cdn.luogu.com.cn/upload/usericon/799947.png","link":"/","description":"关注 Badnuker 谢谢喵~","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Markdown&Latex测试","uid":"408d284ba38138d0b621ff151bb14130","slug":"Markdown-Latex测试","date":"2023-09-20T23:40:20.000Z","updated":"2023-09-29T12:20:19.763Z","comments":true,"path":"api/articles/Markdown-Latex测试.json","keywords":null,"cover":null,"text":" cpp#include&lt;bits/stdc++.h&gt; using namespace std; const int maxn = 5e5 + 5;...","permalink":"/post/Markdown-Latex测试","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"测试","slug":"测试","count":1,"path":"api/tags/测试.json"}],"author":{"name":"Badnuker","slug":"blog-author","avatar":"https://cdn.luogu.com.cn/upload/usericon/799947.png","link":"/","description":"关注 Badnuker 谢谢喵~","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{}}